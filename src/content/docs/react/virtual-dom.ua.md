---
title: Віртуальний DOM в React
description: Дізнайтесь про Віртуальний DOM в React. Як React ефективно оновлює UI за допомогою віртуального DOM.
section: react
slug: virtual-dom
prev: null
next: usestate
---

**Віртуальний DOM** - це концепція програмування, де "віртуальне" представлення UI зберігається в пам'яті та синхронізується з "реальним" DOM.

## Що таке Віртуальний DOM?

Віртуальний DOM (VDOM) - це легке JavaScript-представлення реального DOM. React створює це віртуальне дерево для ефективного відстеження змін.

```jsx
// JSX перетворюється на React елементи (Віртуальний DOM)
const element = <h1>Привіт, Світ!</h1>;

// Що еквівалентно:
const element = React.createElement('h1', null, 'Привіт, Світ!');

// Результат - вузол Віртуального DOM:
{
  type: 'h1',
  props: {
    children: 'Привіт, Світ!'
  }
}
```

## Як Працює Віртуальний DOM

### 1. Початковий Рендер

Коли ваш компонент вперше рендериться, React створює дерево Віртуального DOM, що представляє UI.

```jsx
function App() {
  return (
    <div>
      <h1>Заголовок</h1>
      <p>Контент</p>
    </div>
  );
}

// Створює дерево Віртуального DOM:
// div
//   ├── h1 ("Заголовок")
//   └── p ("Контент")
```

### 2. Зміна Стану

Коли стан змінюється, React створює нове дерево Віртуального DOM.

```jsx
function Counter() {
  const [count, setCount] = useState(0);
  
  return (
    <div>
      <p>Лічильник: {count}</p>
      <button onClick={() => setCount(count + 1)}>
        Збільшити
      </button>
    </div>
  );
}
```

### 3. Алгоритм Порівняння

React порівнює новий Віртуальний DOM з попереднім (узгодження):

```
Попередній VDOM:        Новий VDOM:
div                      div
├── p ("Лічильник: 0")  ├── p ("Лічильник: 1")  ← Змінено
└── button              └── button
```

### 4. Пакетні Оновлення

React обчислює мінімальний набір змін і оновлює тільки те, що необхідно в реальному DOM.

## Процес Узгодження

React використовує кілька евристик, щоб зробити O(n) алгоритм ефективним:

### 1. Різні Типи Елементів

Коли кореневі елементи мають різні типи, React руйнує старе дерево і будує нове:

```jsx
// Старе
<div>
  <Counter />
</div>

// Нове
<span>
  <Counter />
</span>
// Counter буде демонтовано та змонтовано знову
```

### 2. Однаковий Тип Елемента

При порівнянні двох React DOM елементів одного типу, React дивиться на атрибути та оновлює тільки змінені:

```jsx
// Старе
<div className="before" title="stuff" />

// Нове
<div className="after" title="stuff" />
// Оновлює тільки className
```

### 3. Ключі в Списках

Ключі допомагають React ідентифікувати, які елементи змінилися:

```jsx
// ❌ Без ключів - неефективно
{items.map(item => <li>{item.name}</li>)}

// ✅ З ключами - ефективно
{items.map(item => <li key={item.id}>{item.name}</li>)}
```

## Переваги Віртуального DOM

| Перевага | Опис |
|---------|------|
| **Продуктивність** | Мінімізує дорогі операції з DOM |
| **Абстракція** | Розробники працюють з простими оновленнями стану |
| **Кросплатформність** | Та сама парадигма працює для React Native |
| **Пакетування** | Декілька оновлень групуються разом |

## Віртуальний DOM проти Реального DOM

```
Операції з Реальним DOM:
1. Парсинг HTML → DOM Дерево
2. Обчислення стилів → CSSOM
3. Обчислення макету
4. Малювання пікселів
5. Композиція шарів

Віртуальний DOM:
1. Створення нового VDOM
2. Порівняння зі старим VDOM
3. Обчислення мінімальних змін
4. Застосування до Реального DOM (один раз)
```

> **Порада:** Хоча Віртуальний DOM допомагає з продуктивністю, він не завжди швидший за пряме маніпулювання DOM. Його основна перевага - надання декларативної, компонентної архітектури.
